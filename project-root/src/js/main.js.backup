// =======================================================
// MAIN.JS ‚Äî FICA LANDING
// =======================================================

// Marca inicial (quita la clase no-js para estilos progresivos)
document.body.classList.remove("no-js");

// ===== VARIABLES GLOBALES =====
const header = document.querySelector(".header");
const backToTop = document.querySelector(".back-to-top");
const navToggle = document.querySelector(".nav__toggle");
const navMenu = document.querySelector("#navMenu");
const navBackdrop = document.querySelector("[data-backdrop]");
const modal = document.querySelector("[data-modal]");
const videoEl = modal?.querySelector("video");
const openVideoBtn = document.querySelector("[data-open-video]");
const openVideoFullscreenBtn = document.querySelector("[data-open-video-fullscreen]");
const closeVideoBtn = document.querySelector("[data-close-video]");
// Variables de idioma movidas a la funci√≥n de inicializaci√≥n
let lastFocused = null;

// =======================================================
// 1Ô∏è‚É£ NAV STICKY + SCROLL SHADOW + BACK TO TOP
// =======================================================
function handleScroll() {
  const scrolled = window.scrollY > 8;
  if (header) {
    header.classList.toggle("header--scrolled", scrolled);
  }
  if (backToTop) {
    backToTop.hidden = window.scrollY < 300;
  }
}
window.addEventListener("scroll", handleScroll, { passive: true });
handleScroll();

// =======================================================
// 2Ô∏è‚É£ MEN√ö M√ìVIL ACCESIBLE MEJORADO
// =======================================================
function closeMenu() {
  if (!navMenu || !navToggle) return;
  
  navMenu.classList.remove("is-open");
  if (navBackdrop) navBackdrop.hidden = true;
  navToggle.setAttribute("aria-expanded", "false");
  document.body.classList.remove("lock-scroll");
  
  console.log("üì± Men√∫ cerrado");
}

function openMenu() {
  if (!navMenu || !navToggle) return;
  
  navMenu.classList.add("is-open");
  if (navBackdrop) navBackdrop.hidden = false;
  navToggle.setAttribute("aria-expanded", "true");
  document.body.classList.add("lock-scroll");
  
  // Focus en el primer enlace despu√©s de la animaci√≥n
  setTimeout(() => {
    const firstLink = navMenu.querySelector("a");
    if (firstLink) firstLink.focus();
  }, 100);
  
  console.log("üì± Men√∫ abierto");
}

function toggleMenu() {
  if (!navToggle) return;
  
  const expanded = navToggle.getAttribute("aria-expanded") === "true";
  expanded ? closeMenu() : openMenu();
}

// Event listeners para el men√∫
if (navToggle) {
  navToggle.addEventListener("click", toggleMenu);
  console.log("üì± Toggle del men√∫ inicializado");
} else {
  console.error("‚ùå No se encontr√≥ el bot√≥n toggle del men√∫");
}

if (navMenu) {
  console.log("‚úÖ Men√∫ de navegaci√≥n encontrado");
} else {
  console.error("‚ùå No se encontr√≥ el men√∫ de navegaci√≥n");
}

if (navBackdrop) {
  console.log("‚úÖ Backdrop encontrado");
} else {
  console.error("‚ùå No se encontr√≥ el backdrop");
}

if (navBackdrop) {
  navBackdrop.addEventListener("click", closeMenu);
}

if (navMenu) {
  navMenu.addEventListener("click", (e) => {
    if (e.target.tagName === "A") {
      closeMenu();
              console.log(`ÔøΩ Bloque ${index + 1} -> backOutRight (delay: ${index * 200}ms)`);
      }, index * 200); // Escalonado de salida: 0ms, 200ms, 400ms
    }
  });
}

// Cerrar men√∫ con Escape y manejar resize
window.addEventListener("keydown", (e) => {
  if (e.key === "Escape") {
    if (navMenu && navMenu.classList.contains("is-open")) closeMenu();
    if (modal && !modal.hidden) closeModal();
    
    // Cerrar men√∫s de idioma
    document.querySelectorAll('.lang__btn[aria-expanded="true"]').forEach(btn => {
      btn.setAttribute('aria-expanded', 'false');
      const menu = btn.parentElement.querySelector('.lang__menu');
      if (menu) menu.hidden = true;
    });
  }
});

// Cerrar men√∫ m√≥vil al cambiar a desktop
window.addEventListener("resize", () => {
  if (window.innerWidth >= 992 && navMenu && navMenu.classList.contains("is-open")) {
    closeMenu();
    console.log("üì± Men√∫ cerrado por cambio de tama√±o de ventana");
  }
});

// Funci√≥n de debug para el men√∫ (disponible en consola)
window.debugMenu = function() {
  console.log("=== DEBUG MEN√ö HAMBURGUESA ===");
  console.log("Toggle button:", navToggle);
  console.log("Menu element:", navMenu);
  console.log("Backdrop element:", navBackdrop);
  console.log("Menu is open:", navMenu?.classList.contains("is-open"));
  console.log("Toggle aria-expanded:", navToggle?.getAttribute("aria-expanded"));
  console.log("Body has lock-scroll:", document.body.classList.contains("lock-scroll"));
};

// =======================================================
// 3Ô∏è‚É£ VIDEO MANIFIESTO - REPRODUCCI√ìN INLINE
// =======================================================
function openModal() {
  lastFocused = document.activeElement;
  modal.hidden = false;
  modal.setAttribute("aria-hidden", "false");
  if (videoEl) {
    videoEl.currentTime = 0;
    videoEl.play().catch(() => {});
    videoEl.focus();
  }
  document.body.classList.add("lock-scroll");
}

function closeModal() {
  modal.hidden = true;
  modal.setAttribute("aria-hidden", "true");
  if (videoEl) videoEl.pause();
  document.body.classList.remove("lock-scroll");
  lastFocused && lastFocused.focus();
}

// Funci√≥n para reproducir video inline en el container
function playVideoInline() {
  const youtubeVideo = document.getElementById('youtubeVideo');
  const playButton = document.getElementById('playButton');
  
  if (youtubeVideo && playButton) {
    // Ocultar bot√≥n play y mostrar iframe de YouTube
    playButton.style.display = 'none';
    
    // Cargar el video de YouTube con autoplay
    youtubeVideo.src = 'https://www.youtube.com/embed/m4U5MPSoL4E?autoplay=1&rel=0';
    youtubeVideo.style.display = 'block';
    
    console.log('üé• Video de YouTube cargado y reproduciendo en container de 1170px');
  }
}

function openVideoFullscreen() {
  const fullscreenVideo = document.createElement('video');
  fullscreenVideo.src = 'project-root/src/assets/videos/FICA_video_final.mp4';
  fullscreenVideo.controls = true;
  fullscreenVideo.autoplay = true;
  fullscreenVideo.style.width = '100%';
  fullscreenVideo.style.height = '100%';
  fullscreenVideo.style.objectFit = 'contain';
  
  const fullscreenContainer = document.createElement('div');
  fullscreenContainer.style.cssText = `
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: black;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  `;
  
  fullscreenContainer.appendChild(fullscreenVideo);
  document.body.appendChild(fullscreenContainer);
  
  const closeFullscreen = () => {
    document.body.removeChild(fullscreenContainer);
    document.removeEventListener('keydown', handleEscape);
  };
  
  const handleEscape = (e) => {
    if (e.key === 'Escape') closeFullscreen();
  };
  
  fullscreenContainer.addEventListener('click', (e) => {
    if (e.target === fullscreenContainer) closeFullscreen();
  });
  
  fullscreenVideo.addEventListener('ended', closeFullscreen);
  document.addEventListener('keydown', handleEscape);
}
// Event listeners para video
openVideoBtn?.addEventListener("click", openModal);

// Inicializar control de video cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', () => {
  // Bot√≥n play del video inline
  const playBtn = document.getElementById('playButton');
  if (playBtn) {
    playBtn.addEventListener('click', playVideoInline);
    console.log('‚úÖ Bot√≥n play video inline inicializado');
  }
  
  // Mantener funcionalidad de pantalla completa para botones existentes
  const fullscreenBtns = document.querySelectorAll('[data-open-video-fullscreen]');
  fullscreenBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const video = document.createElement('video');
      video.src = 'project-root/src/assets/videos/FICA_video_final.mp4';
      video.controls = true;
      video.autoplay = true;
      video.style.cssText = 'width:100%;height:100%;object-fit:contain';
      
      const container = document.createElement('div');
      container.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:black;z-index:9999;display:flex;align-items:center;justify-content:center';
      
      container.appendChild(video);
      document.body.appendChild(container);
      
      const close = () => {
        document.body.removeChild(container);
        document.removeEventListener('keydown', handleEscape);
      };
      
      const handleEscape = (e) => {
        if (e.key === 'Escape') close();
      };
      
      container.onclick = (e) => e.target === container && close();
      document.addEventListener('keydown', handleEscape);
      video.onended = close;
      
      console.log('üé• Abriendo video en pantalla completa');
    });
  });
});

closeVideoBtn?.addEventListener("click", closeModal);
modal?.addEventListener("click", (e) => {
  if (e.target === modal) closeModal();
});

// =======================================================
// 4Ô∏è‚É£ BOT√ìN "VOLVER ARRIBA"
// =======================================================
backToTop?.addEventListener("click", (e) => {
  e.preventDefault();
  window.scrollTo({ top: 0, behavior: "smooth" });
});

// =======================================================
// 5Ô∏è‚É£ SELECTOR DE IDIOMA - M√öLTIPLES CON OCULTACI√ìN
// =======================================================
const languages = {
  es: 'Espa√±ol',
  ca: 'Catal√†',
  eu: 'Euskera', 
  gl: 'Galego',
  en: 'English'
};

function updateLanguageMenus(selectedLang) {
  document.querySelectorAll('[data-lang-selector]').forEach(selector => {
    const btn = selector.querySelector('.lang__btn');
    const menu = selector.querySelector('.lang__menu');
    const langText = btn.querySelector('[data-lang-text]');
    
    // Actualizar texto del bot√≥n
    if (langText) {
      langText.textContent = selectedLang.toUpperCase();
    }
    
    // Actualizar atributo data-lang-current
    btn.setAttribute('data-lang-current', selectedLang);
    
    // Mostrar/ocultar opciones del men√∫
    menu.querySelectorAll('li').forEach(li => {
      const button = li.querySelector('button');
      const langCode = button.getAttribute('data-lang');
      li.hidden = langCode === selectedLang;
    });
  });
}

function initLanguageSelector(langBtn, langMenu) {
  if (!langBtn || !langMenu) {
    console.warn("‚ùå Selector de idioma no encontrado:", { btn: langBtn, menu: langMenu });
    return;
  }
  
  console.log("‚úÖ Inicializando selector:", langBtn.id, langMenu.id);
  
  langBtn.addEventListener("click", (e) => {
    e.preventDefault();
    e.stopPropagation();
    console.log("üñ±Ô∏è Click en bot√≥n de idioma:", langBtn.id);
    
    const expanded = langBtn.getAttribute("aria-expanded") === "true";
    langBtn.setAttribute("aria-expanded", String(!expanded));
    langMenu.hidden = expanded;
    
    console.log("üìã Estado del men√∫:", { expanded: !expanded, hidden: langMenu.hidden });
  });

  langMenu.querySelectorAll("button").forEach((btn) => {
    btn.addEventListener("click", () => {
      const selectedLang = btn.getAttribute('data-lang');
      updateLanguageMenus(selectedLang);
      
      langBtn.setAttribute("aria-expanded", "false");
      langMenu.hidden = true;
    });
  });

  document.addEventListener("click", (e) => {
    if (!langBtn.contains(e.target) && !langMenu.contains(e.target)) {
      langBtn.setAttribute("aria-expanded", "false");
      langMenu.hidden = true;
    }
  });
}

// Inicializar todos los selectores de idioma
document.querySelectorAll("[data-lang-selector]").forEach(langContainer => {
  const btn = langContainer.querySelector(".lang__btn");
  const menu = langContainer.querySelector(".lang__menu");
  console.log("üåê Inicializando selector de idioma:", btn?.id, menu?.id);
  initLanguageSelector(btn, menu);
});

// Inicializar estado por defecto (espa√±ol seleccionado)
updateLanguageMenus('es');

// =======================================================
// 6Ô∏è‚É£ CONTACT FORM 11 ‚Äî VALIDACI√ìN Y SUBMIT
// =======================================================
function initContactForm11() {
  const form = document.getElementById('contactForm');
  if (!form) return;
  
  const nombre = form.querySelector('#nombre');
  const email = form.querySelector('#email');
  const mensaje = form.querySelector('#mensaje');
  const priv = form.querySelector('#priv');
  const honeypot = form.querySelector('#empresa');
  const status = document.getElementById('form-message-success');
  
  // Validaci√≥n en tiempo real
  function validateField(field, errorId, validator) {
    const errorEl = document.getElementById(errorId);
    const isValid = validator(field.value);
    
    if (errorEl) {
      errorEl.hidden = isValid;
      field.setAttribute('aria-invalid', !isValid);
    }
    
    return isValid;
  }
  
  // Validadores
  const validators = {
    nombre: (value) => value.trim().length > 0,
    email: (value) => /^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(value),
    mensaje: (value) => value.trim().length > 0
  };
  
  // Event listeners para validaci√≥n en tiempo real
  nombre.addEventListener('blur', () => validateField(nombre, 'err-nombre', validators.nombre));
  email.addEventListener('blur', () => validateField(email, 'err-email', validators.email));
  mensaje.addEventListener('blur', () => validateField(mensaje, 'err-mensaje', validators.mensaje));
  
  // Submit del formulario
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    
    // Verificar honeypot (protecci√≥n anti-spam)
    if (honeypot && honeypot.value.trim() !== '') {
      return; // Bot detectado, abortar silenciosamente
    }
    
    // Validar todos los campos
    const isNombreValid = validateField(nombre, 'err-nombre', validators.nombre);
    const isEmailValid = validateField(email, 'err-email', validators.email);
    const isMensajeValid = validateField(mensaje, 'err-mensaje', validators.mensaje);
    const isPrivValid = priv.checked;
    
    if (!isPrivValid) {
      priv.focus();
      return;
    }
    
    // Si todo es v√°lido, simular env√≠o
    if (isNombreValid && isEmailValid && isMensajeValid && isPrivValid) {
      // Mostrar mensaje de √©xito
      status.style.display = 'block';
      
      // Reset del formulario
      form.reset();
      
      // Ocultar errores
      document.querySelectorAll('.contact-form-11__error').forEach(error => {
        error.hidden = true;
      });
      
      // Ocultar mensaje despu√©s de 4 segundos
      setTimeout(() => {
        status.style.display = 'none';
      }, 4000);
      
      // Scroll suave al inicio del formulario
      form.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
  });
}

// Inicializar Contact Form 11
initContactForm11();

// =======================================================
// 7Ô∏è‚É£ CONTADOR ANIMADO PARA KPIs
// =======================================================
function animateCounter(element) {
  const text = element.textContent;
  const hasPlus = text.includes('+');
  const target = parseInt(text.replace(/[^0-9]/g, ''), 10);
  
  if (isNaN(target)) return;
  
  let current = 0;
  const increment = target / 60; // 60 frames para 1 segundo
  const timer = setInterval(() => {
    current += increment;
    if (current >= target) {
      current = target;
      clearInterval(timer);
    }
    element.textContent = Math.floor(current) + (hasPlus ? '+' : '');
  }, 16); // ~60fps
}

// =======================================================
// 8Ô∏è‚É£ ANIMACIONES DE ENTRADA SUAVES (scroll reveal b√°sico)
// =======================================================
const revealEls = document.querySelectorAll(
  ".section, .card, .testimonial, .kpi"
);
const observer = new IntersectionObserver(
  (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("in-view");
        
        // Si es un KPI, animar el contador
        const kpiValue = entry.target.querySelector('.kpi__value');
        if (kpiValue) {
          setTimeout(() => animateCounter(kpiValue), 300);
        }
        
        observer.unobserve(entry.target);
      }
    });
  },
  { threshold: 0.1 }
);
revealEls.forEach((el) => observer.observe(el));

// =======================================================
// 9Ô∏è‚É£ CARRUSELES AUTOM√ÅTICOS
// =======================================================
function initCarousel(carousel) {
  if (!carousel) return;
  
  const track = carousel.querySelector('[data-carousel-track]');
  const dots = carousel.querySelectorAll('[data-slide]');
  
  // Verificar que existan elementos necesarios
  if (!track || dots.length === 0) {
    console.warn('Carrusel: elementos requeridos no encontrados', carousel);
    return;
  }
  
  let currentSlide = 0;
  let autoplayInterval;
  
  function goToSlide(index) {
    if (index < 0 || index >= dots.length) return;
    
    currentSlide = index;
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
    
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === currentSlide);
    });
  }
  
  function nextSlide() {
    if (dots.length === 0) return;
    currentSlide = (currentSlide + 1) % dots.length;
    goToSlide(currentSlide);
  }
  
  function startAutoplay() {
    stopAutoplay(); // Limpiar cualquier intervalo previo
    autoplayInterval = setInterval(nextSlide, 5000); // 5 segundos como solicitado
  }
  
  function stopAutoplay() {
    if (autoplayInterval) {
      clearInterval(autoplayInterval);
      autoplayInterval = null;
    }
  }
  
  // Event listeners para los dots
  dots.forEach((dot, index) => {
    if (dot) {
      dot.addEventListener('click', (e) => {
        e.preventDefault();
        stopAutoplay();
        goToSlide(index);
        // Reanudar autoplay despu√©s de 3 segundos de inactividad
        setTimeout(startAutoplay, 3000);
      });
    }
  });
  
  // Pausar en hover
  carousel.addEventListener('mouseenter', stopAutoplay);
  carousel.addEventListener('mouseleave', startAutoplay);
  
  // Pausar en focus (accesibilidad)
  carousel.addEventListener('focusin', stopAutoplay);
  carousel.addEventListener('focusout', () => {
    setTimeout(startAutoplay, 1000);
  });
  
  // Inicializar primer slide como activo
  goToSlide(0);
  
  // Iniciar autoplay despu√©s de un breve delay
  setTimeout(startAutoplay, 100);
}



// =======================================================
// üé† INICIALIZACI√ìN DE CARRUSELES
// =======================================================
function initAllCarousels() {
  // Inicializar carruseles personalizados (si existen)
  const customCarousels = document.querySelectorAll('[data-carousel]');
  if (customCarousels.length > 0) {
    console.log(`Inicializando ${customCarousels.length} carruseles personalizados`);
    customCarousels.forEach((carousel, index) => {
      console.log(`Inicializando carrusel ${index + 1}:`, carousel);
      initCarousel(carousel);
    });
  }

  // Inicializar Bootstrap carousel de testimonios
  const testimonialCarousel = document.getElementById('carouselTestimonios');
  if (testimonialCarousel) {
    console.log('Carrusel de testimonios encontrado');
    
    if (typeof bootstrap !== 'undefined') {
      console.log('Inicializando carrusel Bootstrap de testimonios con intervalo de 5 segundos');
      
      // Asegurarse de que no haya instancia previa
      const existingCarousel = bootstrap.Carousel.getInstance(testimonialCarousel);
      if (existingCarousel) {
        existingCarousel.dispose();
      }
      
      // Crear nueva instancia con inicio autom√°tico inmediato
      const carouselInstance = new bootstrap.Carousel(testimonialCarousel, {
        interval: 3000, // 3 segundos para que sea m√°s din√°mico
        ride: 'carousel',
        wrap: true,
        touch: true,
        pause: 'hover'
      });
    } else {
      console.warn('Bootstrap no est√° disponible - el carrusel no funcionar√° autom√°ticamente');
    }
  } else {
    console.warn('Carrusel de testimonios no encontrado en el DOM');
  }
}

// Inicializar cuando el DOM est√© listo
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAllCarousels);
} else {
  // El DOM ya est√° cargado
  setTimeout(initAllCarousels, 100); // Peque√±o delay para asegurar que Bootstrap est√© listo
}

// =======================================================
// üêõ FUNCIONES DE DEBUGGING Y VERIFICACI√ìN
// =======================================================
// Funci√≥n para verificar el estado del carrusel (puedes ejecutar en consola)
window.checkCarousel = function() {
  const carousel = document.getElementById('carouselTestimonios');
  if (!carousel) {
    console.error('‚ùå Carrusel no encontrado');
    return;
  }
  
  console.log('=== ESTADO DEL CARRUSEL ===');
  console.log('‚úÖ Elemento encontrado:', carousel);
  console.log('üìä Intervalo configurado:', carousel.getAttribute('data-bs-interval'));
  
  if (typeof bootstrap !== 'undefined') {
    const instance = bootstrap.Carousel.getInstance(carousel);
    if (instance) {
      console.log('‚úÖ Instancia Bootstrap activa:', instance);
      console.log('‚è±Ô∏è Intervalo actual:', instance._config.interval);
      console.log('üîÑ Estado cycling:', instance._isPaused ? 'Pausado' : 'Activo');
    } else {
      console.log('‚ùå No hay instancia Bootstrap');
    }
  } else {
    console.log('‚ùå Bootstrap no disponible');
  }
  
  const items = carousel.querySelectorAll('.carousel-item');
  console.log(`üìÑ Slides encontrados: ${items.length}`);
};

// Auto-verificaci√≥n despu√©s de 2 segundos
setTimeout(() => {
  console.log('üîç Verificaci√≥n autom√°tica del carrusel:');
  window.checkCarousel();
}, 2000);

// =======================================================
// üé® BOTONES "LEER M√ÅS" CON COLOR SECUNDARIO
// =======================================================
function initReadMoreButtons() {
  // Seleccionar espec√≠ficamente los botones "Leer m√°s"
  const readMoreButtons = document.querySelectorAll('a.btn-outline-primary[href*="idealista"], a.btn-outline-primary[href*="weforum"], a.btn-outline-primary[href*="psychologytoday"], a.btn-outline-primary[href*="junecare"], a.btn-outline-primary[href*="soledades"]');
  
  console.log(`üîò Inicializando ${readMoreButtons.length} botones "Leer m√°s"`);
  
  readMoreButtons.forEach((button, index) => {
    console.log(`Bot√≥n ${index + 1}: ${button.textContent.trim()}`);
    
    // Agregar clase personalizada para identificaci√≥n
    button.classList.add('btn-read-more');
    
    // Evento mousedown para efecto inmediato
    button.addEventListener('mousedown', function(e) {
      this.classList.add('active');
      console.log('üñ±Ô∏è Clic en bot√≥n "Leer m√°s" - aplicando color secundario');
    });
    
    // Evento click para mantener el efecto
    button.addEventListener('click', function(e) {
      this.classList.add('active');
      
      // Crear efecto de pulso
      this.style.transform = 'scale(0.95)';
      
      setTimeout(() => {
        this.style.transform = '';
      }, 150);
      
      // Mantener el color secundario por un momento antes de que se abra el enlace
      setTimeout(() => {
        this.classList.remove('active');
      }, 400);
    });
    
    // Evento mouseup para limpiar estado
    button.addEventListener('mouseup', function() {
      setTimeout(() => {
        if (!this.matches(':hover')) {
          this.classList.remove('active');
        }
      }, 200);
    });
    
    // Limpiar al salir del bot√≥n
    button.addEventListener('mouseleave', function() {
      setTimeout(() => {
        this.classList.remove('active');
      }, 100);
    });
  });
}

// Inicializar botones "Leer m√°s" cuando el DOM est√© listo
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initReadMoreButtons);
} else {
  initReadMoreButtons();
}

// =======================================================
// üìê CENTRADO MEJORADO DE TESTIMONIOS
// =======================================================
function improveTestimonialCentering() {
  const testimonialCarousel = document.getElementById('carouselTestimonios');
  
  if (!testimonialCarousel) return;
  
  console.log('üéØ Mejorando centrado de testimonios');
  
  // Asegurar que las im√°genes se centren despu√©s de cargar
  const avatarImages = testimonialCarousel.querySelectorAll('.testimonial__avatar');
  
  avatarImages.forEach((img, index) => {
    // Si la imagen ya est√° cargada
    if (img.complete) {
      img.style.display = 'block';
      img.style.margin = '0 auto';
    } else {
      // Esperar a que cargue la imagen
      img.addEventListener('load', function() {
        this.style.display = 'block';
        this.style.margin = '0 auto';
        console.log(`‚úÖ Imagen ${index + 1} cargada y centrada`);
      });
      
      img.addEventListener('error', function() {
        console.warn(`‚ö†Ô∏è Error cargando imagen ${index + 1}`);
        // Mantener el espacio pero ocultar la imagen rota
        this.style.visibility = 'hidden';
      });
    }
  });
  
  // Mejorar el espaciado despu√©s de transiciones del carrusel
  testimonialCarousel.addEventListener('slid.bs.carousel', function() {
    // Peque√±o delay para asegurar que la transici√≥n termin√≥
    setTimeout(() => {
      const activeItem = this.querySelector('.carousel-item.active');
      if (activeItem) {
        const row = activeItem.querySelector('.row');
        if (row) {
          // Forzar re-centrado
          row.style.justifyContent = 'center';
          row.style.alignItems = 'center';
        }
      }
    }, 50);
  });
}

// Inicializar centrado mejorado
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', improveTestimonialCentering);
} else {
  improveTestimonialCentering();
}

// =======================================================
// üì± RESPONSIVE MEJORADO PARA NOSOTROS
// =======================================================
function improveNosotrosResponsive() {
  const nosotrosContent = document.querySelector('.nosotros__content');
  const nosotrosImage = document.querySelector('.nosotros__image');
  const nosotrosList = document.querySelector('.nosotros__list');
  const nosotrosItems = document.querySelectorAll('.nosotros__item');
  
  if (!nosotrosContent || !nosotrosImage || !nosotrosList) return;
  
  console.log('üì± Mejorando responsive de secci√≥n Nosotros');
  
  function adjustLayout() {
    const screenWidth = window.innerWidth;
    
    // Mobile (< 768px)
    if (screenWidth < 768) {
      nosotrosContent.style.flexDirection = 'column';
      nosotrosImage.style.position = 'static';
      nosotrosImage.style.width = '100%';
      nosotrosImage.style.marginBottom = '2rem';
      
      nosotrosItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 0.1}s`;
        item.classList.add('fade-in-up');
      });
    }
    // Tablet (768px - 991px)
    else if (screenWidth >= 768 && screenWidth < 992) {
      nosotrosContent.style.flexDirection = 'row';
      nosotrosImage.style.position = 'sticky';
      nosotrosImage.style.width = '40%';
      nosotrosImage.style.marginBottom = '0';
    }
    // Desktop (992px+)
    else {
      nosotrosContent.style.flexDirection = 'row';
      nosotrosImage.style.position = 'sticky';
      nosotrosImage.style.width = '45%';
      nosotrosImage.style.marginBottom = '0';
    }
  }
  
  // Ajustar layout inicial
  adjustLayout();
  
  // Ajustar en resize con debounce
  let resizeTimeout;
  window.addEventListener('resize', () => {
    clearTimeout(resizeTimeout);
    resizeTimeout = setTimeout(adjustLayout, 100);
  });
  
  // Intersection Observer para animaciones en scroll
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const itemsObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry, index) => {
      if (entry.isIntersecting) {
        setTimeout(() => {
          entry.target.classList.add('animate-in');
        }, index * 150);
        itemsObserver.unobserve(entry.target);
      }
    });
  }, observerOptions);
  
  // Observar items de nosotros
  nosotrosItems.forEach(item => {
    itemsObserver.observe(item);
  });
}

// =======================================================
// üñºÔ∏è SINCRONIZAR ALTURA DE IMAGEN CON TEXTO - NOSOTROS
// =======================================================
function syncNosotrosImageHeight() {
  const nosotrosImage = document.querySelector('.nosotros__image img');
  const nosotrosList = document.querySelector('.nosotros__list');
  
  if (!nosotrosImage || !nosotrosList) return;
  
  function adjustImageHeight() {
    const screenWidth = window.innerWidth;
    
    // Solo aplicar en desktop (992px+) 
    if (screenWidth >= 992) {
      // Resetear altura para obtener medida natural del contenido
      nosotrosImage.style.height = 'auto';
      
      // Obtener altura del contenido de texto
      const textHeight = nosotrosList.offsetHeight;
      
      // Aplicar la misma altura a la imagen
      nosotrosImage.style.height = `${textHeight}px`;
      
      console.log(`üñºÔ∏è Altura de imagen sincronizada: ${textHeight}px`);
    } else {
      // En mobile/tablet, volver a altura autom√°tica
      nosotrosImage.style.height = 'auto';
    }
  }
  
  // Ajustar inicialmente despu√©s de un breve delay para asegurar el renderizado
  setTimeout(adjustImageHeight, 100);
  
  // Ajustar en resize
  let imageResizeTimeout;
  window.addEventListener('resize', () => {
    clearTimeout(imageResizeTimeout);
    imageResizeTimeout = setTimeout(adjustImageHeight, 150);
  });
  
  // Re-ajustar cuando las fuentes se cargan (puede cambiar la altura del texto)
  document.fonts.ready.then(adjustImageHeight);
}

/* SISTEMA PARA APLICAR IM√ÅGENES DE FONDO A TARJETAS PRENSA/BLOG */
function initCardBackgroundImages() {
  console.log('üñºÔ∏è Inicializando sistema de im√°genes de fondo para tarjetas');
  
  // Solo en desktop donde aplicamos el efecto
  if (window.innerWidth >= 768) {
    console.log('üíª Modo desktop: aplicando im√°genes como fondo');
    
    // Funci√≥n para aplicar imagen a una tarjeta
    const applyBackgroundImage = (card, img, type, index) => {
      if (img && img.src && img.src.includes('project-root')) {
        console.log(`${type} ${index + 1}: Aplicando imagen ${img.src}`);
        
        // Esperar a que se cargue la imagen antes de aplicarla
        const testImg = new Image();
        testImg.onload = () => {
          // Aplicar como background-image
          card.style.setProperty('background-image', `url("${img.src}")`, 'important');
          card.style.setProperty('background-size', 'cover', 'important');
          card.style.setProperty('background-position', 'center', 'important');
          card.style.setProperty('background-repeat', 'no-repeat', 'important');
          card.classList.add('has-bg-image');
          
          console.log(`‚úÖ ${type} ${index + 1}: Imagen aplicada correctamente`);
        };
        testImg.onerror = () => {
          console.error(`‚ùå ${type} ${index + 1}: Error cargando imagen ${img.src}`);
        };
        testImg.src = img.src;
      } else {
        console.warn(`‚ö†Ô∏è ${type} ${index + 1}: No se encontr√≥ imagen v√°lida`);
      }
    };
    
    // Tarjetas de prensa
    const prensaCards = document.querySelectorAll('#prensa .card');
    console.log(`ÔøΩ Encontradas ${prensaCards.length} tarjetas de prensa`);
    
    prensaCards.forEach((card, index) => {
      const img = card.querySelector('.card-img-top');
      applyBackgroundImage(card, img, 'üì∞ Prensa', index);
    });
    
    // Tarjetas de blog
    const blogCards = document.querySelectorAll('#blog .card');
    console.log(`üìù Encontradas ${blogCards.length} tarjetas de blog`);
    
    blogCards.forEach((card, index) => {
      const img = card.querySelector('.card-img-top');
      applyBackgroundImage(card, img, 'üìù Blog', index);
    });
    
    console.log('‚úÖ Proceso de aplicaci√≥n de im√°genes de fondo iniciado');
  } else {
    console.log('üì± Modo m√≥vil: usando im√°genes HTML est√°ndar');
    // En mobile, limpiar estilos de fondo y mostrar im√°genes HTML
    const allCards = document.querySelectorAll('#prensa .card, #blog .card');
    allCards.forEach(card => {
      card.style.removeProperty('background-image');
      card.style.removeProperty('background-size');
      card.style.removeProperty('background-position');
      card.style.removeProperty('background-repeat');
      card.classList.remove('has-bg-image');
    });
  }
}

// Manejar cambios de tama√±o de ventana
window.addEventListener('resize', () => {
  setTimeout(initCardBackgroundImages, 100);
});

// Funci√≥n de debugging para las tarjetas (disponible en consola)
window.debugCards = function() {
  console.log('=== DEBUG TARJETAS PRENSA/BLOG ===');
  console.log('üìè DIMENSIONES OBJETIVO: 500px alto √ó 365px ancho (igual que viviendas)');
  
  const prensaCards = document.querySelectorAll('#prensa .card');
  const blogCards = document.querySelectorAll('#blog .card');
  
  console.log(`üì∞ Tarjetas prensa encontradas: ${prensaCards.length}`);
  console.log(`üìù Tarjetas blog encontradas: ${blogCards.length}`);
  console.log(`üì± Tama√±o ventana: ${window.innerWidth}px`);
  
  prensaCards.forEach((card, index) => {
    const img = card.querySelector('.card-img-top');
    const bgImage = getComputedStyle(card).backgroundImage;
    const cardStyle = getComputedStyle(card);
    console.log(`üì∞ Prensa ${index + 1}:`);
    console.log(`  - Imagen HTML src: ${img?.src || 'NO ENCONTRADA'}`);
    console.log(`  - Background image: ${bgImage}`);
    console.log(`  - Has bg-image class: ${card.classList.contains('has-bg-image')}`);
    console.log(`  - Dimensiones actuales: ${cardStyle.width} √ó ${cardStyle.height}`);
  });
  
  blogCards.forEach((card, index) => {
    const img = card.querySelector('.card-img-top');
    const bgImage = getComputedStyle(card).backgroundImage;
    const cardStyle = getComputedStyle(card);
    console.log(`üìù Blog ${index + 1}:`);
    console.log(`  - Imagen HTML src: ${img?.src || 'NO ENCONTRADA'}`);
    console.log(`  - Background image: ${bgImage}`);
    console.log(`  - Has bg-image class: ${card.classList.contains('has-bg-image')}`);
    console.log(`  - Dimensiones actuales: ${cardStyle.width} √ó ${cardStyle.height}`);
  });
  
  // Comparar con viviendas
  const viviendaCards = document.querySelectorAll('#viviendas .card');
  if (viviendaCards.length > 0) {
    const viviendaStyle = getComputedStyle(viviendaCards[0]);
    console.log(`üè† REFERENCIA VIVIENDAS: ${viviendaStyle.width} √ó ${viviendaStyle.height}`);
  }
};

// Funci√≥n para forzar re-aplicaci√≥n de im√°genes
window.forceCardImages = function() {
  console.log('üîÑ Forzando re-aplicaci√≥n de im√°genes...');
  initCardBackgroundImages();
  setTimeout(() => {
    window.debugCards();
  }, 1000);
};

// Inicializar AOS y sistema completo
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', () => {
    initAOS();
    improveNosotrosResponsive();
    syncNosotrosImageHeight();
    initNosotrosAnimations();
    initFormAnimations(); // Cambiado de initFooterAnimations a initFormAnimations
    initFooterAnimations(); // Mantener pero ahora est√° deshabilitado
    
    // Aplicar im√°genes con delay para asegurar que el DOM est√© listo
    setTimeout(() => {
      initCardBackgroundImages();
      console.log('üí° Funciones de debug disponibles:');
      console.log('  - window.debugCards() - Ver estado de las tarjetas');
      console.log('  - window.forceCardImages() - Forzar re-aplicaci√≥n de im√°genes');
      console.log('  - window.debugFormIcons() - Ver estado y animar iconos del formulario');
    }, 500);
  });
} else {
  initAOS();
  improveNosotrosResponsive();
  syncNosotrosImageHeight();
  initNosotrosAnimations();
  initFormAnimations(); // Cambiado de initFooterAnimations a initFormAnimations
  initFooterAnimations(); // Mantener pero ahora est√° deshabilitado
  
  setTimeout(() => {
    initCardBackgroundImages();
    console.log('üí° Funciones de debug disponibles:');
    console.log('  - window.debugCards() - Ver estado de las tarjetas');
    console.log('  - window.forceCardImages() - Forzar re-aplicaci√≥n de im√°genes');
    console.log('  - window.debugFormIcons() - Ver estado y animar iconos del formulario');
  }, 500);
}

/* INICIALIZACI√ìN AOS */
function initAOS() {
  if (typeof AOS !== 'undefined') {
    AOS.init({
      offset: 50,
      duration: 1000,
      easing: 'ease-out-cubic',
      mirror: true,
      mirrorOffset: 150,
      once: false,
      disable: false,
      startEvent: 'DOMContentLoaded',
      initClassName: 'aos-init',
      animatedClassName: 'aos-animate'
    });
    
    console.log('üé¨ AOS inicializado correctamente');
    console.log('‚öôÔ∏è Configuraci√≥n: offset=50, duration=1000, mirror=true');
    
    // Refresh AOS despu√©s de un delay para asegurar detecci√≥n correcta
    setTimeout(() => {
      AOS.refresh();
      console.log('üîÑ AOS refresh ejecutado');
    }, 500);
    
  } else {
    console.log('‚ùå AOS no est√° disponible - verificar carga del script');
  }
}

/* SISTEMA DE ANIMACIONES PARA SECCI√ìN NOSOTROS */
function initNosotrosAnimations() {
  // Buscar tanto la imagen directa como el contenedor con data-aos
  const nosotrosImageContainer = document.querySelector('.nosotros__image[data-aos]');
  const nosotrosImage = document.querySelector('.nosotros__image img');
  const animateBlocks = document.querySelectorAll('.animate-on-image');
  
  if (!nosotrosImageContainer || animateBlocks.length === 0) {
    console.log('‚ùå No se encontr√≥ imagen nosotros container o bloques animate-on-image');
    console.log('Container:', nosotrosImageContainer);
    console.log('Bloques:', animateBlocks.length);
    return;
  }
  
  console.log('üé¨ Inicializando animaciones para secci√≥n Nosotros');
  console.log('üñºÔ∏è Container imagen encontrado:', nosotrosImageContainer);
  console.log('üìù Bloques encontrados:', animateBlocks.length);
  
  // Estado inicial - preparar los bloques para animaci√≥n
  animateBlocks.forEach((block, index) => {
    // Limpiar cualquier clase de animaci√≥n previa
    block.classList.remove('animate__animated', 'animate__backInRight', 'animate__backOutRight');
    
    // Hacer visibles para testing
    block.style.opacity = '1';
    block.style.visibility = 'visible';
    
    console.log(`üìù Bloque ${index + 1} preparado:`, block.querySelector('h3')?.textContent);
  });
  
  // Variable para controlar el estado de las animaciones
  let animationsActive = false;
  
  // Funci√≥n para activar animaciones de entrada
  function activateEntryAnimations() {
    if (animationsActive) return;
    animationsActive = true;
    
    console.log('üéØ ESPERANDO que termine animaci√≥n de imagen fade-left...');
    
    // Esperar a que termine la animaci√≥n de la imagen (fade-left = 1000ms + buffer)
    setTimeout(() => {
      console.log('üéØ ACTIVANDO animaciones de entrada - backInRight escalonado');
    
    animateBlocks.forEach((block, index) => {
      setTimeout(() => {
        // Limpiar clases de salida
        block.classList.remove('animate__backOutRight');
        // Activar animaci√≥n de entrada
        block.classList.add('animate__animated', 'animate__backInRight');
        
        console.log(`‚ú® Bloque ${index + 1} -> backInRight (delay: ${index * 400}ms despu√©s de imagen)`);
      }, index * 400); // Escalonado: 0ms, 400ms, 800ms
    });
    }, 1200); // Esperar 1200ms a que termine la imagen
  }
  
  // Funci√≥n para activar animaciones de salida
  function activateExitAnimations() {
    if (!animationsActive) return;
    animationsActive = false;
    
    console.log('üéØ ACTIVANDO animaciones de salida - backOutRight escalonado');
    
    animateBlocks.forEach((block, index) => {
      setTimeout(() => {
        // Limpiar clases de entrada
        block.classList.remove('animate__backInRight');
      // Activar animaci√≥n de salida
        block.classList.add('animate__animated', 'animate__backOutRight');
      
      console.log(`üí® Bloque ${index + 1} -> backOutRight (delay: ${index * 200}ms)`);
      }, index * 200); // Escalonado de salida: 0ms, 200ms, 400ms
    });
  }
  
  // Esperar a que AOS est√© completamente inicializado
  setTimeout(() => {
    // Escuchar eventos AOS del container de la imagen
    document.addEventListener('aos:in', function(event) {
      if (event.detail && event.detail.el === nosotrosImageContainer) {
        console.log('üéØ IMAGEN NOSOTROS ENTRA EN VIEWPORT');
        activateEntryAnimations();
      }
    });
    
    document.addEventListener('aos:out', function(event) {
      if (event.detail && event.detail.el === nosotrosImageContainer) {
        console.log('üéØ IMAGEN NOSOTROS SALE DEL VIEWPORT');
        activateExitAnimations();
      }
    });
    
    // Tambi√©n usar IntersectionObserver como respaldo
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.target === nosotrosImageContainer) {
          if (entry.isIntersecting) {
            console.log('üëÅÔ∏è OBSERVER: Imagen visible - activando animaciones');
            activateEntryAnimations();
          } else {
            console.log('üëÅÔ∏è OBSERVER: Imagen no visible - desactivando animaciones');
            activateExitAnimations();
          }
        }
      });
    }, {
      threshold: 0.3,
      rootMargin: '0px'
    });
    
    observer.observe(nosotrosImageContainer);
    
    console.log('‚úÖ Sistema de animaciones "Nosotros" COMPLETAMENTE inicializado');
    console.log('üé¨ Escuchando eventos AOS y usando IntersectionObserver como respaldo');
    
    // TESTING: Activar animaciones despu√©s de 3 segundos para demostraci√≥n
    setTimeout(() => {
      console.log('üß™ TESTING: Activando animaciones de demostraci√≥n en 3 segundos...');
      activateEntryAnimations();
      
      // Y luego la animaci√≥n de salida despu√©s de 5 segundos m√°s
      setTimeout(() => {
        console.log('üß™ TESTING: Activando animaci√≥n de salida...');
        activateExitAnimations();
      }, 5000);
    }, 3000);
    
  }, 2000); // Dar m√°s tiempo a AOS para inicializarse completamente
}

/* SISTEMA DE ANIMACIONES PARA ICONOS DEL FORMULARIO */
function initFormAnimations() {
  // Buscar el contenedor de detalles del formulario por ID
  const formDetailsContainer = document.getElementById('form-details-container');
  const formIcons = document.querySelectorAll('.animate-on-form');
  
  if (!formDetailsContainer || formIcons.length === 0) {
    console.log('‚ùå No se encontr√≥ form details container o iconos animate-on-form');
    console.log('Container:', formDetailsContainer);
    console.log('Iconos:', formIcons.length);
    return;
  }
  
  console.log('üé¨ Inicializando animaciones SOLO para iconos del formulario');
  console.log('üìù Container details encontrado:', formDetailsContainer);
  console.log('üîó Iconos encontrados:', formIcons.length);
  
  // Estado inicial - preparar los iconos para animaci√≥n
  formIcons.forEach((icon, index) => {
    // Limpiar cualquier clase de animaci√≥n previa
    icon.classList.remove('animate__animated', 'animate__backInRight', 'animate__backOutRight');
    
    // Hacer visibles para testing
    icon.style.opacity = '1';
    icon.style.visibility = 'visible';
    
    console.log(`üîó Icono ${index + 1} preparado:`, icon.getAttribute('src'));
  });
  
  // Variable para controlar el estado de las animaciones
  let formAnimationsActive = false;
  
  // Funci√≥n para activar animaciones de entrada con CSS simple
  function activateFormEntryAnimations() {
    if (formAnimationsActive) return;
    formAnimationsActive = true;
    
    console.log('üéØ ACTIVANDO animaciones de entrada iconos SVG - slideInRight escalonado');
    
    formIcons.forEach((icon, index) => {
      setTimeout(() => {
        // Animar entrada con CSS simple
        icon.style.opacity = '1';
        icon.style.transform = 'translateX(0px)';
        
        console.log(`‚ú® Icono SVG ${index + 1} (${icon.src.split('/').pop()}) -> entrada (delay: ${index * 200}ms)`);
      }, index * 200); // Escalonado: 0ms, 200ms, 400ms, 600ms
    });
  }
  
  // Funci√≥n para activar animaciones de salida con CSS simple
  function activateFormExitAnimations() {
    if (!formAnimationsActive) return;
    formAnimationsActive = false;
    
    console.log('üéØ ACTIVANDO animaciones de salida iconos SVG - slideOutRight escalonado');
    
    formIcons.forEach((icon, index) => {
      setTimeout(() => {
        // Animar salida con CSS simple
        icon.style.opacity = '0';
        icon.style.transform = 'translateX(50px)';
        
        console.log(`üí® Icono SVG ${index + 1} (${icon.src.split('/').pop()}) -> salida (delay: ${index * 150}ms)`);
      }, index * 150); // Escalonado de salida: 0ms, 150ms, 300ms, 450ms
    });
  }
  
  // Esperar a que AOS est√© completamente inicializado
  setTimeout(() => {
    // Escuchar eventos AOS del contenedor de detalles
    document.addEventListener('aos:in', function(event) {
      if (event.detail && event.detail.el === formDetailsContainer) {
        console.log('üéØ FORM DETAILS CONTAINER ENTRA EN VIEWPORT');
        activateFormEntryAnimations();
      }
    });
    
    document.addEventListener('aos:out', function(event) {
      if (event.detail && event.detail.el === formDetailsContainer) {
        console.log('üéØ FORM DETAILS CONTAINER SALE DEL VIEWPORT');
        activateFormExitAnimations();
      }
    });
    
    // Tambi√©n usar IntersectionObserver como respaldo
    const formObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.target === formDetailsContainer) {
          if (entry.isIntersecting) {
            console.log('üëÅÔ∏è OBSERVER: Form details visible - activando animaciones iconos');
            activateFormEntryAnimations();
          } else {
            console.log('üëÅÔ∏è OBSERVER: Form details no visible - desactivando animaciones iconos');
            activateFormExitAnimations();
          }
        }
      });
    }, {
      threshold: 0.3,
      rootMargin: '0px'
    });
    
  formObserver.observe(formDetailsContainer);
  
  // Inicializar estado de los iconos SVG
  formIcons.forEach((icon, index) => {
    icon.style.opacity = '0';
    icon.style.transform = 'translateX(50px)';
    icon.style.transition = 'all 0.6s ease';
  });
  
  console.log('‚úÖ Sistema de animaciones "Iconos SVG Formulario" COMPLETAMENTE inicializado');
  console.log(`üìù Iconos SVG encontrados: ${formIcons.length}`);
  formIcons.forEach((icon, index) => {
    console.log(`  - Icono ${index + 1}: ${icon.src.split('/').pop()}`);
  });
}

// Funci√≥n de debug para iconos SVG del formulario
window.debugFormIcons = function() {
  console.log('=== DEBUG ICONOS SVG FORMULARIO ===');
  
  const container = document.getElementById('form-details-container');
  const icons = document.querySelectorAll('.animate-on-form');
  
  console.log('üéØ Container encontrado:', container);
  console.log('üîó Iconos SVG encontrados:', icons.length);
  
  if (container) {
    console.log('üìç Container ID:', container.id);
    console.log('üìç Container visible:', container.offsetWidth > 0 && container.offsetHeight > 0);
  }
  
  icons.forEach((icon, index) => {
    console.log(`üîó Icono SVG ${index + 1}: ${icon.src.split('/').pop()}`, {
      opacity: icon.style.opacity,
      transform: icon.style.transform,
      classes: icon.className
    });
  });
  
  // Forzar animaci√≥n de entrada para testing
  console.log('üß™ Forzando animaci√≥n de entrada SVG...');
  icons.forEach((icon, index) => {
    setTimeout(() => {
      icon.style.opacity = '1';
      icon.style.transform = 'translateX(0px)';
      console.log(`‚ú® Icono SVG ${index + 1} (${icon.src.split('/').pop()}) animado manualmente`);
    }, index * 200);
  });
};

/* SISTEMA DE ANIMACIONES PARA ICONOS DEL FOOTER - DESHABILITADO */
function initFooterAnimations() {
  console.log('‚ö™ Footer animations deshabilitadas - footer est√°tico como solicitado');
  return;
  
  console.log('üé¨ Inicializando animaciones para iconos del footer');
  console.log('üì± Container footer encontrado:', footerSocialContainer);
  console.log('üîó Iconos encontrados:', footerIcons.length);
  
  // Estado inicial - preparar los iconos para animaci√≥n
  footerIcons.forEach((icon, index) => {
    // Limpiar cualquier clase de animaci√≥n previa
    icon.classList.remove('animate__animated', 'animate__backInRight', 'animate__backOutRight');
    
    // Hacer visibles para testing
    icon.style.opacity = '1';
    icon.style.visibility = 'visible';
    
    console.log(`üîó Icono ${index + 1} preparado:`, icon.getAttribute('aria-label'));
  });
  
  // Variable para controlar el estado de las animaciones
  let footerAnimationsActive = false;
  
  // Funci√≥n para activar animaciones de entrada
  function activateFooterEntryAnimations() {
    if (footerAnimationsActive) return;
    footerAnimationsActive = true;
    
    console.log('üéØ ESPERANDO que termine animaci√≥n del footer fade-left...');
    
    // Esperar a que termine la animaci√≥n del contenedor (fade-left = 800ms + buffer)
    setTimeout(() => {
      console.log('üéØ ACTIVANDO animaciones de entrada footer - backInRight escalonado');
    
      footerIcons.forEach((icon, index) => {
        setTimeout(() => {
          // Limpiar clases de salida
          icon.classList.remove('animate__backOutRight');
          // Activar animaci√≥n de entrada
          icon.classList.add('animate__animated', 'animate__backInRight');
          
          console.log(`‚ú® Icono ${index + 1} -> backInRight (delay: ${index * 200}ms despu√©s de footer)`);
        }, index * 200); // Escalonado: 0ms, 200ms, 400ms
      });
    }, 1000); // Esperar 1000ms a que termine el footer
  }
  
  // Funci√≥n para activar animaciones de salida
  function activateFooterExitAnimations() {
    if (!footerAnimationsActive) return;
    footerAnimationsActive = false;
    
    console.log('üéØ ACTIVANDO animaciones de salida footer - backOutRight escalonado');
    
    footerIcons.forEach((icon, index) => {
      setTimeout(() => {
        // Limpiar clases de entrada
        icon.classList.remove('animate__backInRight');
        // Activar animaci√≥n de salida
        icon.classList.add('animate__animated', 'animate__backOutRight');
        
        console.log(`üí® Icono ${index + 1} -> backOutRight (delay: ${index * 150}ms)`);
      }, index * 150); // Escalonado de salida: 0ms, 150ms, 300ms
    });
  }
  
  // Esperar a que AOS est√© completamente inicializado
  setTimeout(() => {
    // Escuchar eventos AOS del container del footer
    document.addEventListener('aos:in', function(event) {
      if (event.detail && event.detail.el === footerSocialContainer) {
        console.log('üéØ FOOTER SOCIAL ENTRA EN VIEWPORT');
        activateFooterEntryAnimations();
      }
    });
    
    document.addEventListener('aos:out', function(event) {
      if (event.detail && event.detail.el === footerSocialContainer) {
        console.log('üéØ FOOTER SOCIAL SALE DEL VIEWPORT');
        activateFooterExitAnimations();
      }
    });
    
    // Tambi√©n usar IntersectionObserver como respaldo
    const footerObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.target === footerSocialContainer) {
          if (entry.isIntersecting) {
            console.log('üëÅÔ∏è OBSERVER: Footer visible - activando animaciones');
            activateFooterEntryAnimations();
          } else {
            console.log('üëÅÔ∏è OBSERVER: Footer no visible - desactivando animaciones');
            activateFooterExitAnimations();
          }
        }
      });
    }, {
      threshold: 0.3,
      rootMargin: '0px'
    });
    
    footerObserver.observe(footerSocialContainer);
    
    console.log('‚úÖ Sistema de animaciones "Footer" COMPLETAMENTE inicializado');
    
  }, 2500); // Dar un poco m√°s de tiempo que nosotros para evitar conflictos
}
